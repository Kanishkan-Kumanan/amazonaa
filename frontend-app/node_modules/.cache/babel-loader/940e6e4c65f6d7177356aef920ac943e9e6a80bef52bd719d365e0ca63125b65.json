{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{Link}from\"react-router-dom\";import Card from\"react-bootstrap/Card\";import Button from\"react-bootstrap/Button\";import Rating from\"./Rating\";import axios from\"axios\";import{useContext}from\"react\";import{Store}from\"../Store\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Product(props){var product=props.product;var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var addToCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item){var existItem,quantity,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:existItem=cartItems.find(function(x){return x._id===product._id;});quantity=existItem?existItem.quantity+1:1;_context.next=4;return axios.get(\"/api/products/\".concat(item._id));case 4:data=_context.sent;if(!(data.countInStock<quantity)){_context.next=8;break;}window.alert(\"Sorry,Product is out of stock\");return _context.abrupt(\"return\");case 8:ctxDispatch({type:\"CART_ADD_ITEM\",payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 9:case\"end\":return _context.stop();}},_callee);}));return function addToCartHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product.slug),children:/*#__PURE__*/_jsx(\"img\",{src:product.image,className:\"card-img-top\",alt:product.image})}),/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(product.slug),children:/*#__PURE__*/_jsx(Card.Title,{children:product.name})}),/*#__PURE__*/_jsxs(Card.Text,{children:[\"$\",product.price]}),product.countInStock===0?/*#__PURE__*/_jsx(Button,{variant:\"light\",disabled:true,children:\"Out of Stock\"}):/*#__PURE__*/_jsx(Button,{className:\"btn-primary\",onClick:function onClick(){return addToCartHandler(product);},children:\"Add to Cart\"}),/*#__PURE__*/_jsx(Rating,{rating:product.rating,reviews:product.numReviews})]})]});}export default Product;","map":{"version":3,"names":["Link","Card","Button","Rating","axios","useContext","Store","jsx","_jsx","jsxs","_jsxs","Product","props","product","_useContext","state","ctxDispatch","dispatch","cartItems","cart","addToCartHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","item","existItem","quantity","data","wrap","_callee$","_context","prev","next","find","x","_id","get","concat","sent","countInStock","window","alert","abrupt","type","payload","_objectSpread","stop","_x","apply","arguments","children","to","slug","src","image","className","alt","Body","Title","name","Text","price","variant","disabled","onClick","rating","reviews","numReviews"],"sources":["C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/src/components/Product.js"],"sourcesContent":["import {Link} from \"react-router-dom\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Rating from \"./Rating\";\r\nimport axios from \"axios\";\r\nimport { useContext } from \"react\";\r\nimport { Store } from \"../Store\";\r\n\r\nfunction Product(props){\r\n    const {product} = props;\r\n    const {state,dispatch:ctxDispatch} = useContext(Store);\r\n    const {cart : {cartItems},} = state;\r\n\r\n    const addToCartHandler = async (item) =>{\r\n      const existItem = cartItems.find((x) => x._id === product._id);\r\n      const quantity = existItem ? existItem.quantity + 1 : 1;\r\n      const data = await axios.get(`/api/products/${item._id}`);\r\n      if(data.countInStock < quantity){\r\n        window.alert(\"Sorry,Product is out of stock\");\r\n        return\r\n      }\r\n      ctxDispatch({\r\n        type:\"CART_ADD_ITEM\",\r\n        payload:{...item,quantity},\r\n      })\r\n    };\r\n\r\n    return(\r\n        <Card>\r\n            <Link to={`/products/${product.slug}`}>\r\n            <img src={product.image} className=\"card-img-top\" alt={product.image}/>\r\n            </Link>\r\n            <Card.Body>\r\n              <Link to={`/products/${product.slug}`}> \r\n                <Card.Title>{product.name}</Card.Title>\r\n              </Link> \r\n              <Card.Text>${product.price}</Card.Text>\r\n              {product.countInStock === 0 ?(<Button variant=\"light\" disabled>Out of Stock</Button>)\r\n              :(<Button className=\"btn-primary\" onClick={() =>addToCartHandler(product)}>Add to Cart</Button>\r\n              )}\r\n              \r\n              <Rating rating={product.rating} reviews={product.numReviews} />\r\n            </Card.Body>\r\n         \r\n          </Card>\r\n    )\r\n}\r\n\r\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}