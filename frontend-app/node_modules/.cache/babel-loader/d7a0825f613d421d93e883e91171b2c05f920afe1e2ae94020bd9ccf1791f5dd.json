{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext}from\"react\";import{Store}from\"../Store\";import{Helmet}from\"react-helmet-async\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import MessageBox from\"../components/MessageBox\";import{Link,useNavigate}from\"react-router-dom\";import ListGroup from\"react-bootstrap/ListGroup\";import Button from\"react-bootstrap/Button\";import Card from\"react-bootstrap/Card\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var navigate=useNavigate();var updateClickHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:data=_context.sent;if(!(data.countInStock<quantity)){_context.next=6;break;}window.alert(\"Sorry,Product is out of stock\");return _context.abrupt(\"return\");case 6:ctxDispatch({type:\"CART_ADD_ITEM\",payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 7:case\"end\":return _context.stop();}},_callee);}));return function updateClickHandler(_x,_x2){return _ref.apply(this,arguments);};}();var deleteCartHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(item){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:ctxDispatch({type:\"CART_REMOVE_ITEM\",payload:item});case 1:case\"end\":return _context2.stop();}},_callee2);}));return function deleteCartHandler(_x3){return _ref2.apply(this,arguments);};}();var checkOutHandler=function checkOutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/products/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{variant:\"light\",disabled:item.quantity===1,onClick:function onClick(){return updateClickHandler(item,item.quantity-1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",disabled:item.quantity===item.countInStock,onClick:function onClick(){return updateClickHandler(item,item.quantity+1);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return deleteCartHandler(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : $ \",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:function onClick(){return checkOutHandler();},variant:\"primary\",disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["useContext","Store","Helmet","Row","Col","MessageBox","Link","useNavigate","ListGroup","Button","Card","axios","jsx","_jsx","jsxs","_jsxs","CartScreen","_useContext","state","ctxDispatch","dispatch","cartItems","cart","navigate","updateClickHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","item","quantity","data","wrap","_callee$","_context","prev","next","get","concat","_id","sent","countInStock","window","alert","abrupt","type","payload","_objectSpread","stop","_x","_x2","apply","arguments","deleteCartHandler","_ref2","_callee2","_callee2$","_context2","_x3","checkOutHandler","children","md","length","to","map","Item","className","src","image","alt","name","slug","variant","disabled","onClick","price","Body","reduce","a","c"],"sources":["C:/Users/Kanishkan Kumanan/Desktop/amazonaa/frontend-app/src/screens/CartScreen.js"],"sourcesContent":["import { useContext } from \"react\";\r\nimport { Store } from \"../Store\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport ListGroup from \"react-bootstrap/ListGroup\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport axios from \"axios\";\r\n\r\nexport default function CartScreen(){\r\n    const {state,dispatch:ctxDispatch} = useContext(Store);\r\n    const {cart : {cartItems},} = state;\r\n    const navigate = useNavigate();\r\n\r\n    const updateClickHandler = async (item,quantity) =>{\r\n      const data = await axios.get(`/api/products/${item._id}`);\r\n      if(data.countInStock < quantity){\r\n        window.alert(\"Sorry,Product is out of stock\");\r\n        return\r\n      }\r\n      ctxDispatch({\r\n        type:\"CART_ADD_ITEM\",\r\n        payload:{...item,quantity},\r\n      })\r\n    };\r\n\r\n    const deleteCartHandler = async(item) =>{\r\n        ctxDispatch({type:\"CART_REMOVE_ITEM\",payload:item})\r\n    }\r\n\r\n    const checkOutHandler = () =>{\r\n        navigate('/signin?redirect=/shipping');\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <Helmet>\r\n                <title>Shopping Cart</title>\r\n            </Helmet>\r\n            <h1>Shopping Cart</h1>\r\n            <Row>\r\n                <Col md={8}>\r\n                    {cartItems.length === 0 ? (\r\n                    <MessageBox>\r\n                       Cart is empty. <Link to=\"/\">Go Shopping</Link>\r\n                    </MessageBox>\r\n                    ):(\r\n                        <ListGroup>\r\n                            {cartItems.map((item) =>(\r\n                                <ListGroup.Item key={item._id}>\r\n                                 <Row className=\"align-items-center\">\r\n                                    <Col md={4}>\r\n                                        <img\r\n                                          src={item.image} alt={item.name} className=\"img-fluid rounded img-thumbnail\">\r\n                                        </img>{' '}\r\n                                        <Link to={`/products/${item.slug}`}>{item.name}</Link>\r\n                                    </Col>\r\n                                    <Col md={3}>\r\n                                        <Button variant=\"light\" disabled={item.quantity === 1} onClick={()=>updateClickHandler(item,item.quantity - 1)}>\r\n                                            <i className=\"fas fa-minus-circle\"></i>\r\n                                        </Button>{' '}\r\n                                        <span>{item.quantity}</span>{' '}\r\n                                        <Button variant=\"light\" disabled={item.quantity === item.countInStock} onClick={() =>updateClickHandler(item,item.quantity+ 1)}>\r\n                                            <i className=\"fas fa-plus-circle\"></i>\r\n                                        </Button>                                    \r\n                                    </Col>\r\n                                    <Col md={3}>${item.price}</Col>\r\n                                    <Col md={2}>\r\n                                        <Button variant=\"light\" onClick={() =>deleteCartHandler(item)}>\r\n                                            <i className=\"fas fa-trash\"></i>\r\n                                        </Button>\r\n                                    </Col>\r\n                                 </Row>\r\n                                </ListGroup.Item>\r\n                            ))}\r\n                        </ListGroup>\r\n                    )}\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card>\r\n                        <Card.Body>\r\n                            <ListGroup variant=\"flush\">\r\n                                <ListGroup.Item>\r\n                                    <h3>\r\n                                        Subtotal ({cartItems.reduce((a,c) => a + c.quantity,0)}{' '}items) : $ {cartItems.reduce((a,c)=> a + c.price * c.quantity,0)}\r\n                                    </h3>\r\n                                </ListGroup.Item>\r\n                                <ListGroup.Item>\r\n                                    <div className=\"d-grid\">\r\n                                     <Button type=\"button\" onClick={()=>checkOutHandler()} variant=\"primary\" disabled={cartItems.length === 0}>\r\n                                      Proceed to Checkout\r\n                                     </Button>\r\n                                    </div>\r\n                                </ListGroup.Item>\r\n                            </ListGroup>\r\n                        </Card.Body>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </div>\r\n    )\r\n}\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}